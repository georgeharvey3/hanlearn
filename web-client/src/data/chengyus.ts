export interface Chengyu {
  characters: string;
  pinyin: string;
  meaning: string;
}

export const chengyus: Chengyu[] = [
  { characters: '不可得兼', pinyin: 'bù kě dé jiān', meaning: "you can't have both at the same time" },
  { characters: '不得其法', pinyin: 'bù dé qí fǎ', meaning: 'not knowing the right way' },
  { characters: '心神不宁', pinyin: 'xīn shén bù níng', meaning: 'to feel bad about nothing' },
  { characters: '一本正经', pinyin: 'yī běn zhèng jīng', meaning: 'to always be serious' },
  { characters: '沉鱼落雁', pinyin: 'chén yú luò yàn', meaning: 'extremely beautiful' },
  { characters: '独一无二', pinyin: 'dú yī wú èr', meaning: 'unique' },
  { characters: '数一数二', pinyin: 'shǔ yī shǔ èr', meaning: 'the best; considered among the best' },
  { characters: '绝无仅有', pinyin: 'jué wú jǐn yǒu', meaning: 'one of a kind; unique' },
  { characters: '损人利己', pinyin: 'sǔn rén lì jǐ', meaning: 'to seek benefit at the expense of others' },
  { characters: '幸灾乐祸', pinyin: 'xìng zāi lè huò', meaning: "to enjoy others' misfortunes" },
  { characters: '力不从心', pinyin: 'lì bù cóng xīn', meaning: "the qualities aren't at the level of the aspirations" },
  { characters: '亦步亦趋', pinyin: 'yì bù yì qū', meaning: 'to blindly imitate someone' },
  { characters: '滔滔不绝', pinyin: 'tāo tāo bù jué', meaning: 'without interruption' },
  { characters: '桃李满天下', pinyin: 'táo lǐ mǎn tiān xià', meaning: 'to have pupils everywhere' },
  { characters: '省吃俭用', pinyin: 'shěng chī jiǎn yòng', meaning: 'to live frugally' },
  { characters: '婀娜多姿', pinyin: 'ē nuó duō zī', meaning: 'to be graceful' },
  { characters: '应运而生', pinyin: 'yìng yùn ér shēng', meaning: 'to emerge thanks to a favorable situation' },
  { characters: '厮守终生', pinyin: 'sī shǒu zhōng shēng', meaning: 'to be together forever' },
  { characters: '寓意深远', pinyin: 'yù yì shēn yuǎn', meaning: 'morale is very low' },
  { characters: '一切就绪', pinyin: 'yī qiè jiù xù', meaning: 'everything is in order' },
  { characters: '囫囵吞枣', pinyin: 'hú lún tūn zǎo', meaning: 'to swallow information without assimilating it' },
  { characters: '塞翁失马', pinyin: 'sài wēng shī mǎ', meaning: 'not all bad comes to cause harm' },
  { characters: '狼吞虎咽', pinyin: 'láng tūn hǔ yàn', meaning: 'to brush away food like a wolf' },
  { characters: '避而不见', pinyin: 'bì ér bù jiàn', meaning: 'to avoid meeting someone' },
  { characters: '成千上万', pinyin: 'chéng qiān shàng wàn', meaning: 'thousands' },
  { characters: '依依不舍', pinyin: 'yī yī bù shě', meaning: 'to be reluctant to leave something' },
  { characters: '如期而至', pinyin: 'rú qī ér zhì', meaning: 'to arrive in time' },
  { characters: '自作聪明', pinyin: 'zì zuò cōng míng', meaning: 'to be presumptuous' },
  { characters: '废寝忘食', pinyin: 'fèi qǐn wàng shí', meaning: 'forgetting to eat and sleep so as to do something' },
  { characters: '一门心思', pinyin: 'yī mén xīn si', meaning: 'to be solely concentrated on doing something' },
  { characters: '深情厚谊', pinyin: 'shēn qíng hòu yì', meaning: 'long and intimate friendship' },
  { characters: '死里逃生', pinyin: 'sǐ lǐ táo shēng', meaning: 'to find a way out of certain death' },
  { characters: '与众不同', pinyin: 'yǔ zhòng bù tóng', meaning: 'different than the crowd' },
  { characters: '心甘情愿', pinyin: 'xīn gān qíng yuàn', meaning: 'to be extremely happy to do something' },
  { characters: '无可奈何', pinyin: 'wú kě nài hé', meaning: 'to have no alternatives' },
  { characters: '眼见为实', pinyin: 'yǎn jiàn wéi shí', meaning: 'to believe in what can be seen' },
  { characters: '耳听为虚', pinyin: 'ěr tīng wèi xū', meaning: 'to not believe in what you hear' },
  { characters: '十全十美', pinyin: 'shí quán shí měi', meaning: 'perfect' },
  { characters: '星火燎原', pinyin: 'xīng huǒ liáo yuán', meaning: 'a single spark creates a blaze' },
  { characters: '夸大其词', pinyin: 'kuā dà qí cí', meaning: 'exaggerate' },
  { characters: '举目无亲', pinyin: 'jǔ mù wú qīn', meaning: 'to be a stranger in a strange land' },
  { characters: '四海为家', pinyin: 'sì hǎi wéi jiā', meaning: 'to make every place your home; live as a hobo' },
  { characters: '小心翼翼', pinyin: 'xiǎo xīn yì yì', meaning: 'extremely cautious' },
  { characters: '焕然一新', pinyin: 'huàn rán yī xīn', meaning: 'to take on a completely new appearance' },
  { characters: '乱七八糟', pinyin: 'luàn qī bā zāo', meaning: 'in complete disorder' },
  { characters: '不自觉地', pinyin: 'bù zì jué de', meaning: 'unconsciously' },
  { characters: '筋疲力尽', pinyin: 'jīn pí lì jìn', meaning: 'to feel exhausted' },
  { characters: '顺其自然', pinyin: 'shùn qí zì rán', meaning: 'to let nature take its course' },
  { characters: '恋恋不舍', pinyin: 'liàn liàn bù shě', meaning: 'to be reluctant to leave' },
  { characters: '擦肩而过', pinyin: 'cā jiān ér guò', meaning: 'to brush up against someone in passing' },
  { characters: '迫不及待', pinyin: 'pò bù jí dài', meaning: 'impatiently waiting' },
  { characters: '无所不谈', pinyin: 'wú suǒ bù tán', meaning: 'to talk about everything under the sun' },
  { characters: '不谋而合', pinyin: 'bù móu ér hé', meaning: 'to agree without discussion' },
  { characters: '不以为然', pinyin: 'bù yǐ wéi rán', meaning: 'to consider something unacceptable' },
  { characters: '我行我素', pinyin: 'wǒ xíng wǒ sù', meaning: 'to stick to your own way of doing things' },
  { characters: '栩栩如生', pinyin: 'xǔ xǔ rú shēng', meaning: 'as vivid as life' },
  { characters: '莞尔一笑', pinyin: 'wǎn ěr yī xiào', meaning: 'to give a faint smile' },
  { characters: '胡说八道', pinyin: 'hú shuō bā dào', meaning: 'to talk nonsense' },
  { characters: '眉飞色舞', pinyin: 'méi fēi sè wǔ', meaning: 'to be exultant, exuberant' },
  { characters: '漫无目的', pinyin: 'màn wú mù dì', meaning: 'to be without a goal' },
  { characters: '左顾右盼', pinyin: 'zuǒ gù yòu pàn', meaning: 'to look to the left and right' },
  { characters: '一针见血', pinyin: 'yī zhēn jiàn xiě', meaning: 'to hit the mark' },
  { characters: '轻而易举', pinyin: 'qīng ér yì jǔ', meaning: 'easy to do' },
  { characters: '全心全意', pinyin: 'quán xīn quán yì', meaning: 'to do something with all your heart' },
  { characters: '相去甚远', pinyin: 'xiāng qù shèn yuǎn', meaning: 'to make a big difference' },
  { characters: '彬彬有礼', pinyin: 'bīn bīn yǒu lǐ', meaning: 'sophisticated' },
  { characters: '称兄道弟', pinyin: 'chēng xiōng dào dì', meaning: 'to be like brothers with someone; to have a great relationship' },
  { characters: '相提并论', pinyin: 'xiāng tí bìng lùn', meaning: 'to be placed at the same level of' },
  { characters: '惟妙惟肖', pinyin: 'wéi miào wéi xiào', meaning: 'to be just like the real thing' },
  { characters: '忙里偷闲', pinyin: 'máng lǐ tōu xián', meaning: 'to find time for pleasure between work' },
  { characters: '全神贯注', pinyin: 'quán shén guàn zhù', meaning: 'absorbed, absorbed in' },
  { characters: '缘木求鱼', pinyin: 'yuán mù qiú yú', meaning: 'to use counterproductive methods to do something' },
  { characters: '见钱眼开', pinyin: 'jiàn qián yǎn kāi', meaning: 'to be desirous of money' },
  { characters: '见利忘义', pinyin: 'jiàn lì wàng yì', meaning: 'to forget integrity so as to achieve gain' },
  { characters: '下不为例', pinyin: 'xià bù wéi lì', meaning: 'it will not set a precedent' },
  { characters: '可想而知', pinyin: 'kě xiǎng ér zhī', meaning: 'as you can well imagine' },
  { characters: '不翼而飞', pinyin: 'bù yì ér fēi', meaning: 'to suddenly disappear' },
  { characters: '惊慌失措', pinyin: 'jīng huāng shī cuò', meaning: 'caught in panic' },
  { characters: '龇牙咧嘴', pinyin: 'zī yá liě zuǐ', meaning: 'to grit your teeth in pain' },
  { characters: '火上加油', pinyin: 'huǒ shàng jiā yóu', meaning: 'to throw fuel on the fire' },
  { characters: '雪上加霜', pinyin: 'xuě shàng jiā shuāng', meaning: 'one disaster after another' },
  { characters: '如愿以偿', pinyin: 'rú yuàn yǐ cháng', meaning: 'fully satisfied desires' },
  { characters: '无理取闹', pinyin: 'wú lǐ qǔ nào', meaning: 'to create problems for no reason' },
  { characters: '对牛弹琴', pinyin: 'duì niú tán qín', meaning: 'to speak to the wrong audience' },
  { characters: '理直气壮', pinyin: 'lǐ zhí qì zhuàng', meaning: "to do something while knowing you're in the right" },
  { characters: '思前想后', pinyin: 'sī qián xiǎng hòu', meaning: 'to accurately ponder over something' },
  { characters: '如释重负', pinyin: 'rú shì zhòng fù', meaning: 'to feel freed of a great burden' },
  { characters: '不可开交', pinyin: 'bù kě kāi jiāo', meaning: 'extremely' },
  { characters: '重温旧梦', pinyin: 'chóng wēn jiù mèng', meaning: 'to relive an old experience; relive an old dream' },
  { characters: '兴致勃勃', pinyin: 'xìng zhì bó bó', meaning: 'full of enthusiasm' },
  { characters: '如影随形', pinyin: 'rú yǐng suí xíng', meaning: 'inseparable; followed like your own shadow' },
  { characters: '千言万语', pinyin: 'qiān yán wàn yǔ', meaning: 'thousands and thousands of words' },
  { characters: '惴惴不安', pinyin: 'zhuì zhuì bù ān', meaning: 'on thorns' },
  { characters: '大惊小怪', pinyin: 'dà jīng xiǎo guài', meaning: 'great fuss over something ordinary; to complain unjustifiably' },
  { characters: '不足挂齿', pinyin: 'bù zú guà chǐ', meaning: 'nothing to talk about' },
  { characters: '天涯海角', pinyin: 'tiān yá hǎi jiǎo', meaning: 'far off world' },
  { characters: '垂垂老矣', pinyin: 'chuí chuí lǎo yǐ', meaning: 'always older' },
  { characters: '白发苍苍', pinyin: 'bái fà cāng cāng', meaning: 'from white hairs' },
  { characters: '低三下四', pinyin: 'dī sān xià sì', meaning: 'mean, petty' },
  { characters: '安贫乐道', pinyin: 'ān pín lè dào', meaning: 'happy to live a virtuous life even if in a state of poverty' },
  { characters: '光明磊落', pinyin: 'guāng míng lěi luò', meaning: 'in broad daylight; cards showing; correctly and legitimately' },
  { characters: '知足常乐', pinyin: 'zhī zú cháng lè', meaning: 'to be content with what you have' },
  { characters: '东山再起', pinyin: 'dōng shān zài qǐ', meaning: 'to stage a return' },
  { characters: '完璧归赵', pinyin: 'wán bì guī zhào', meaning: 'to give something back to its owner in excellent condition' },
  { characters: '如虎添翼', pinyin: 'rú hǔ tiān yì', meaning: 'with double the power' },
  { characters: '夜深人静', pinyin: 'yè shēn rén jìng', meaning: 'in the silence of deepest night' },
  { characters: '班门弄斧', pinyin: 'bān mén nòng fǔ', meaning: 'to show your talent is of little account in front of a true expert on the material' },
  { characters: '乘风破浪', pinyin: 'chéng fēng pò làng', meaning: 'to have great ambitions' },
  { characters: '程门立雪', pinyin: 'chéng mén lì xuě', meaning: 'to honor the master and respect his teachings' },
  { characters: '狐假虎威', pinyin: 'hú jiǎ hǔ wēi', meaning: 'to intimidate someone by flaunting your relationship with important people' },
  { characters: '孟母三迁', pinyin: 'mèng mǔ sān qiān', meaning: 'a wise mother works to find a healthy educational environment for her children' },
  { characters: '愚公移山', pinyin: 'yú gōng yí shān', meaning: 'to want to is to be able to' },
  { characters: '画蛇添足', pinyin: 'huà shé tiān zú', meaning: 'more than enough' },
  { characters: '开卷有益', pinyin: 'kāi juàn yǒu yì', meaning: 'reading always brings benefits' },
  { characters: '世外桃源', pinyin: 'shì wài táo yuán', meaning: 'paradise of peace; utopia' },
  { characters: '津津有味', pinyin: 'jīn jīn yǒu wèi', meaning: 'to do something with gusto' },
  { characters: '落英缤纷', pinyin: 'luò yīng bīn fēn', meaning: 'flower petals that fall like snowflakes' },
  { characters: '虚怀若谷', pinyin: 'xū huái ruò gǔ', meaning: 'to be extremely open-minded' },
  { characters: '心如止水', pinyin: 'xīn rú zhǐ shuǐ', meaning: 'a peaceful heart; a heart as calm as still water' },
  { characters: '随遇而安', pinyin: 'suí yù ér ān', meaning: 'to feel adequate wherever you are' },
  { characters: '厚德载物', pinyin: 'hòu dé zài wù', meaning: 'to be of strong moral character' },
  { characters: '大智若愚', pinyin: 'dà zhì ruò yú', meaning: 'the wise one appears stupid' },
  { characters: '相濡以沫', pinyin: 'xiāng rú yǐ mò', meaning: 'to help each other out despite both being in delicate condition' },
  { characters: '阳光明媚', pinyin: 'yáng guāng míng mèi', meaning: 'the sun is particularly bright' },
  { characters: '忐忑不安', pinyin: 'tǎn tè bù ān', meaning: 'disquieted; preoccupied; uncomfortable' },
  { characters: '说三道四', pinyin: 'shuō sān dào sì', meaning: 'to gossip' },
  { characters: '不顾一切', pinyin: 'bù gù yī qiè', meaning: 'indifferent to everything' },
  { characters: '一日为师，终身为父', pinyin: 'yī rì wèi shī, zhōng shēn wèi fù', meaning: 'teacher for a day, father for a lifetime' },
  { characters: '不管三七二十一', pinyin: 'bù guǎn sān qī èr shí yī', meaning: 'not caring about the consequences' },
  { characters: '开门见山', pinyin: 'kāi mén jiàn shān', meaning: 'to get right to the chase' },
  { characters: '一蹴而就', pinyin: 'yī cù ér jiù', meaning: 'to be successful on the first try' },
  { characters: '惹是生非', pinyin: 'rě shì shēng fēi', meaning: 'to start a dispute; begin a conflict' },
  { characters: '安居乐业', pinyin: 'ān jū lè yè', meaning: 'to live in peace, without disturbance' },
  { characters: '难兄难弟', pinyin: 'nàn xiōng nàn dì', meaning: 'brothers of misfortune' },
  { characters: '笑里藏刀', pinyin: 'xiào lǐ cáng dāo', meaning: 'a dagger hidden behind a smile' },
  { characters: '海市蜃楼', pinyin: 'hǎi shì shèn lóu', meaning: 'to build castles in the air; mirage' },
  { characters: '厮守终身', pinyin: 'sī shǒu zhōng shēn', meaning: "to be together for one's whole life" },
  { characters: '伶牙俐齿', pinyin: 'líng yá lì chǐ', meaning: 'to be clear and eloquent' },
  { characters: '日积月累', pinyin: 'rì jī yuè lěi', meaning: 'to accumulate for a long time' },
  { characters: '雷打不动', pinyin: 'léi dǎ bù dòng', meaning: 'to be determined, unshakable' },
  { characters: '家常便饭', pinyin: 'jiā cháng biàn fàn', meaning: 'routine' },
  { characters: '一头雾水', pinyin: 'yī tóu wù shuǐ', meaning: 'to feel confused' },
  { characters: '大汗淋漓', pinyin: 'dà hàn lín lí', meaning: 'to be soaked with sweat' },
  { characters: '有条不紊', pinyin: 'yǒu tiáo bù wěn', meaning: 'methodical, systematic' },
  { characters: '知难而退', pinyin: 'zhī nán ér tuì', meaning: 'to run from difficulty' },
  { characters: '似懂非懂', pinyin: 'sì dǒng fēi dǒng', meaning: 'to not fully understand' },
  { characters: '知行合一', pinyin: 'zhī xíng hé yī', meaning: 'the union of practice and knowledge' },
];

const BASE_DATE = new Date('2021-05-24');

/**
 * Get the daily chengyu based on days since BASE_DATE
 */
export function getDailyChengyu(): {
  chengyu: string;
  pinyin: string;
  options: string[];
  correct: string;
  charPinyins: { char: string; pinyin: string }[];
} {
  const today = new Date();
  const daysSinceBase = Math.floor(
    (today.getTime() - BASE_DATE.getTime()) / (1000 * 60 * 60 * 24)
  );

  const index = daysSinceBase % chengyus.length;
  const todaysChengyu = chengyus[index];

  // Get 3 random wrong options
  const otherChengyus = chengyus.filter((_, i) => i !== index);
  const shuffled = [...otherChengyus].sort(() => Math.random() - 0.5);
  const wrongOptions = shuffled.slice(0, 3).map((c) => c.meaning);

  // Shuffle all options
  const allOptions = [todaysChengyu.meaning, ...wrongOptions].sort(
    () => Math.random() - 0.5
  );

  // Parse pinyin for each character
  const pinyinParts = todaysChengyu.pinyin.split(' ');
  const chars = [...todaysChengyu.characters].filter((c) => c !== '，' && c !== ',');
  const charPinyins = chars.map((char, i) => ({
    char,
    pinyin: pinyinParts[i] || '',
  }));

  return {
    chengyu: todaysChengyu.characters,
    pinyin: todaysChengyu.pinyin,
    options: allOptions,
    correct: todaysChengyu.meaning,
    charPinyins,
  };
}
